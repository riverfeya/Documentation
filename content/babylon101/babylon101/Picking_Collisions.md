---
ID_PAGE: 22111
PG_TITLE: 12. Picking Collisions
---
# Picking Collisions

При выборе объекта с помощью мыши основная трудность заключается в нажатии на 3D-объект, тогда как ваш экран представляет собой плоский 2D-дисплей..

Давайте посмотрим, как мы можем изменить положение мыши в 3D-сцене на следующем примере:


![Picking](/img/how_to/Collisions%20PickResult/11.png)

_Final result_

## Как я могу это сделать ?

Babylon engine позволяет вам сделать это очень легко, предоставляя вам полезные функции.

Прежде всего, после создания плоскости, представляющей стену, и плоскости с изображением нашего удара, мы должны обнаружить щелчок по UI (User Interface). Как только событие поднято, используйте функцию “pick” чтобы получить полезную информацию о связи между вашим кликом и вашей сценой.
```javascript
//Когда происходит событие клика
window.addEventListener("click", function () {
   // Мы пытаемся выбрать объект
   var pickResult = scene.pick(scene.pointerX, scene.pointerY);
}),
```
 
Объект pickResult в основном состоит из 4 частей информации:

1. _hit_ (bool): « True » если ваш клик попадает на объект в сцене.
1. _distance_ (float): “distance” между активной камерой и вашим попаданием (бесконечность, если нет меша)
1. _pickedMesh_ (BABYLON.Mesh): если вы попали в объект, это выбранный меш. Если нет, то это null.
1. _pickedPoint_ (BABYLON.Vector3): точка, которую вы щелкнули, преобразуется в трехмерные координаты в зависимости от объекта, на который вы щелкнули. Null если попадания никуда не произошло.

Теперь у нас есть все данные, необходимые для построения нашей сцены. Нам просто нужно расположить изображение удара нашего пистолета (плоскость, сделанная ранее... называется воздействие) когда пользователь нажимает на плоскость стены:
```javascript
// если щелчок касается объекта стены, мы меняем положение изображения удара
if (pickResult.hit) {
            impact.position.x = pickResult.pickedPoint.x;
            impact.position.y = pickResult.pickedPoint.y;
}
```
Быстро и легко, не так ли?

Не стесняйтесь играть с этой сценой... [at our online playground]( https://www.babylonjs-playground.com/?11).

## Продвинутые функции пикинга

Обратите внимание, что объект pickResult может предоставить вам дополнительную информацию, подробно описано ниже:

- `faceId`: это позиция индекса выбранного фейса в массиве индексов. К ним можно получить доступ так:
```
var indices = pickResult.pickedMesh.getIndices();
var index0 = indices[pickResult.faceId * 3];
var index1 = indices[pickResult.faceId * 3 + 1];
var index2 = indices[pickResult.faceId * 3 + 2];
```

- `submeshId`: ID субмеша по которому пикнули внутри пикнутого меша

- свойства `bu` и `bv` : это барицентрические координаты точки касания пика в пикнутом фейсе. Picked face это треугольный полигон состоящий из 3 вершин, а пикнутая точка это barycenter этих трех вершин со следующими весами:

  * `1 - bu - bv` для вершины n. 0
  * `bu` для вершины n. 1
  * `bv` для вершины n. 2

- `getTextureCoordinates()`: вычисляет координаты текстуры выбранной точки; они будут возвращены как `Vector2` в текстурном протстранстве, что означает, что его координаты будут между 0 и 1.

Возможное использование включает:

- Рисование текстуры с помощью DynamicTexture,
- Изменение грани, которое было задето (delete, move vertices, change color...),
- Смена материала субмеша,
- и т.п.


## Next step
Этот метод столкновения удобен во многих ситуациях. Как только вы поймете события выбора мышью, вы можете начать использовать эту функциональность для продвижения разработки вашего приложения. Теперь пришло время узнать, как найти, где тонкая линия сталкивается или пересекается с сеткой, используя [raycasts](/babylon101/Raycasts)

# Further Reading

[Cameras Overview](/features/Cameras)

 
