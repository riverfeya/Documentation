---
ID_PAGE: 22071
PG_TITLE: 06. ИС
---

# ИС
Как и следовало ожидать, источники света влияют на то, как видны меши, как с точки зрения освещения, так и цвета.
Все меши позволяют свету проходить через них, если не активирована генерация тени. Допустимое количество источников света по умолчанию - четыре, но его можно увеличить.

![Elements](https://doc.babylonjs.com/img/testlight.jpg)

_Красивая сфера с несколькими огнями_


## ТИпы источников света (ИС)
Есть четыре типа ИС которые могут быть использованы с рядом световых свойств.

### Точечный источник
Точечный свет - это свет, определяемый уникальной точкой в ​​мировом пространстве. С этой точки свет излучается во всех направлениях. Хорошим примером точечного светильника является стандартная лампочка.

```javascript
var light = new BABYLON.PointLight("pointLight", new BABYLON.Vector3(1, 10, 1), scene);
```

### Направленный свет
Directional light определяется направлением. Свет излучается отовсюду в указанном направлении и имеет бесконечный диапазон.
Пример направленного света - это когда планета на расстоянии освещается, по-видимому, параллельными линиями света от солнца. Свет  направленный вниз осветит верхнюю часть объекта.

```javascript
var light = new BABYLON.DirectionalLight("DirectionalLight", new BABYLON.Vector3(0, -1, 0), scene);
```

### Спотовый источник света
Spot light определяется положением, направлением, углом и показателем степени (exponent). Эти значения определяют конус света, исходящий из положения, излучающего в направлении.

Угол в радианах определяет размер (поле освещения) конического луча прожектора, а показатель степени определяет скорость затухания света с расстоянием (досягаемостью).

_Простое использование прожектора_

```javascript
var light = new BABYLON.SpotLight("spotLight", new BABYLON.Vector3(0, 30, -10), new BABYLON.Vector3(0, -1, 0), Math.PI / 3, 2, scene);
```

### Полусферический источник света
Hemispheric light это простой способ имитировать окружающий свет. Полусферический свет определяется направлением, обычно «вверх» к небу. Однако именно путем настройки свойств источника света достигается полный эффект.

```javascript
var light = new BABYLON.HemisphericLight("HemiLight", new BABYLON.Vector3(0, 1, 0), scene);
```

## Color Properties
Есть три свойства ИС которые влияют на свет. Два из них _diffuse_ и _specular_ применимо ко всем четырем типам света, третий, _groundColor_, относится только к Hemispheric Light.

1. Diffuse придает базовый цвет объекта;
2. Specular цвет блика.

В этом playgrounds видно как зеленый specular color (green) сочетаясь с диффузным красным (red) производит желтый блик.

* [Playground пример точечного ИС](http://www.babylonjs-playground.com/#20OAV9)

* [Playground пример направленного (directional) ИС](http://www.babylonjs-playground.com/#20OAV9#1)

* [Playground пример Прожекторного ИС](http://www.babylonjs-playground.com/#20OAV9#3)

* [Playground пример купольного (hemispheric) ИС](http://www.babylonjs-playground.com/#20OAV9#5)

Для полусферического света _groundColor_ свет в направлении, противоположном указанному при создании.
Его можно представлять как _diffuse_ и _specular_ light как исходящий из центра объекта в заданном направлении и света _groundColor_ в противоположном направлении.

* [Playground пример hemispheric ИС на двух сферах](http://www.babylonjs-playground.com/#20OAV9#6)

Белый полусферический свет с черным groundColor - полезный метод освещения.

### Intersecting ИС Colors
* [Playground пример пересечения spot ИС](http://www.babylonjs-playground.com/#20OAV9#9)

## Limitations
Babylon.js позволяет создавать и регистрировать столько ИС сколько вы хотите, но знайте, что один StandardMaterial может обрабатывать только определенное количество одновременно ИС (по умолчанию это значение равно 4 что означает первые четыре включенных ИС из списка ИС сцены).
Вы можете изменить это количество с помощью этого кода:

```javascript
var material = new BABYLON.StandardMaterial("mat", scene);
material.maxSimultaneousLights = 6;
```
Но будьте осторожны! Поскольку с более динамичной ИС, Babylon.js будет генерировать большие шейдеры, которые могут быть несовместимы с низкоуровневыми устройствами, такими как мобильные телефоны или небольшие планшеты. В этом случае babylon.js попытается перекомпилировать шейдеры с меньшим количеством ИС.

* [Playground пример с шестью взаимодействующих точечных ИС](https://www.babylonjs-playground.com/#IRVAX#0)

## On, Off или Dimmer
Каждый ИС может быть выключен с помощью
```javascript
light.setEnabled(false);
```
и включен с
```javascript
light.setEnabled(true);
```

Хотите затемнить или сделать ярче свет? установите свойство _intensity_ (значения по умолчанию 1)
```javascript
light0.intensity = 0.5;
light1.intensity = 2.4;
```

Для точечного и прожекторного ИС вы можете установить, как далеко свет достигает, используя свойство _range_ 
```javascript
light.range = 100;
```

## Выбор мешей для освещения
при создании ИС все текущие меши будут освещены им. Есть два способа исключить освещение некоторых мешей.
Меш может быть добавлен ​​к массиву _excludedMeshes_ или добавить те, которые не должны быть исключены в массив _includedOnlyMeshes_ .Количество мешей, которые нужно исключить, может быть одним из факторов при выборе метода для использования. В следующем примере два меша должны быть исключены из _light0_ и twenty three из _light1_. Комментирование строк 26 и 27 в свою очередь покажет индивидуальный эффект.

* [Playground пример Excluding ИС](http://www.babylonjs-playground.com/#20OAV9#8)

## Lighting Normals
Как ИС реагировать на сетку в зависимости от значений, установленных для каждой вершины сетки _normals_, показано на рисунке ниже стрелками, указывающими направление нормалей освещения. На рисунке показаны две плоскости и два ИС. One light is a spot light, the other is a point light. Лицевой стороной каждой плоскости является та, которую вы видите, когда _normals_ указывают на вас, задняя сторона противоположная сторона.

![Elements](https://doc.babylonjs.com/img/how_to/Mesh/normals6.jpg)

_Синяя задняя плоскость и синяя передняя плоскость с точечным и спотовым освещением_

As you can see, the ИС only affect the front face and not the back face.

## Lightmaps
Сложное освещение может быть вычислительно дорогим для вычисления во время выполнения. Чтобы сэкономить на вычислениях, карты освещения могут использоваться для хранения вычисленного освещения в текстуре, которая будет применена к данной сетке..
```javascript
var lightmap = new BABYLON.Texture("lightmap.png", scene);
var material = new BABYLON.StandardMaterial("material", scene);
material.lightmapTexture = lightmap;
```
Note: Чтобы использовать текстуру в качестве карты теней вместо карты освещения, установите поле material.useLightmapAsShadowmap в true.

Способ смешивания ИС сцены с картой освещения основан на режиме освещения карты ИС в сцене.

```javascript
light.lightmapMode = BABYLON.Light.LIGHTMAP_DEFAULT;
```
Это приведет к смешиванию текстуры карты освещения после применения освещения от этого источника света..

```javascript
light.lightmapMode = BABYLON.Light.LIGHTMAP_SPECULAR;
```
Это так же, как LIGHTMAP_DEFAULT кроме только specular lighting и shadows от света будет применяться.

```javascript
light.lightmapMode = BABYLON.Light.LIGHTMAP_SHADOWSONLY;
```
Это так же, как LIGHTMAP_DEFAULT кроме только shadows cast из этого light будет применяться.

* [Playground Example](https://www.babylonjs-playground.com/#ULACCM#2)

## Projection Texture
В некоторых случаях было бы неплохо определить диффузный цвет света из текстуры вместо постоянного цвета. Представьте, что вы пытаетесь смоделировать световые эффекты внутри собора. Свет, проходящий через витражи, будет проецироваться на землю. Это также относится к свету, исходящему от проектора, или световым эффектам, которые можно увидеть на дискотеке..

Для поддержки этой функции вы можете положиться на свойство `projectionTexture` ИС. Это поддерживается только **SpotLight** so far.

```javascript
var spotLight = new BABYLON.SpotLight("spot02", new BABYLON.Vector3(30, 40, 30),
		new BABYLON.Vector3(-1, -2, -1), 1.1, 16, scene);
spotLight.projectionTexture = new BABYLON.Texture("textures/stainedGlass.png", scene);
```

* [Playground Example](https://www.babylonjs-playground.com/#CQNGRK)

Для управления ориентацией проекции и диапазоном вы также можете положиться на следующие свойства:

* ```projectionTextureLightNear``` : near диапазон текстурной проекции. Если плоскость находится перед диапазоном в светлом пространстве, текстурная проекция отсутствует.
* ```projectionTextureLightFar``` : far диапазон текстурной проекции. Если плоскость находится перед диапазоном в светлом пространстве, текстурная проекция отсутствует.
* ```projectionTextureUpDirection``` : помогает определить световое пространство, которое ориентировано в направлении света и выровнено с направлением вверх.

Проецируемая информация умножается на нормальные значения освещенности, чтобы лучше соответствовать Babylon JS lighting. Это также влияет только на диффузное значение. Поэтому может потребоваться изменить зеркальный цвет света, чтобы он лучше подходил к сцене.

## Next step
С использованием этих мощных ИС, ваша сцена, вероятно, действительно начинает 'shine'. И не забывайте, что вы можете анимировать световые позиции, направления, цвета и, следовательно, создавать прекрасные «световые шоу». Мы скоро поговорим об этом, или весело проведем время, узнавая, как это сделать самостоятельно. Может быть, вы могли бы сделать настройки свойств света внутри функции цикла рендеринга сцены. Это весело и красиво!

Guess what! The next tutorial... is about animation! [Click this and let's go!](/babylon101/Animations)

# Further Reading

[ИС Overview](/features/ИС)
